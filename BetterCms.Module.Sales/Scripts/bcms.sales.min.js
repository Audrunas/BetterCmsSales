bettercms.define("bcms.sales",["bcms.jquery","bcms","bcms.siteSettings","bcms.dynamicContent","bcms.ko.extenders","bcms.ko.grid"],function(a,b,m,c,f,g){var k={},l={},h={loadSiteSettingsProductsUrl:null,loadProductsUrl:null,saveProductUrl:null,deleteProductUrl:null},d={deleteProductDialogTitle:null};k.links=h;k.globalization=d;k.selectors=l;var i=(function(n){b.extendsClass(o,n);function o(p,r,q){n.call(this,p,h.loadProductsUrl,r,q);}o.prototype.createItem=function(p){var q=new j(this,p);return q;};return o;})(g.ListViewModel);var j=(function(n){b.extendsClass(o,n);function o(q,p){n.call(this,q,p);var r=this;r.name=f.observable().extend({required:"",maxLength:{maxLength:f.maxLength.name}});r.registerFields(r.name);r.name(p.Name);}o.prototype.getDeleteConfirmationMessage=function(){return a.format(d.deleteProductDialogTitle,this.email());};o.prototype.getSaveParams=function(){var p=n.prototype.getSaveParams.call(this);p.Name=this.name();return p;};return o;})(g.ItemViewModel);function e(q){var n=m.getMainContainer(),o=(q.Success==true)?q.Data:{};var r=new i(n,o.Items,o.GridOptions);r.deleteUrl=h.deleteProductUrl;r.saveUrl=h.saveProductUrl;f.applyBindings(r,n.get(0));var p=n.find("input[type=text],textarea,select").filter(":visible:first");if(p){p.focus();}}k.loadSiteSettingsSalesProducts=function(){c.bindSiteSettings(m,h.loadSiteSettingsProductsUrl,{contentAvailable:e});};k.loadSiteSettingsSalesPartners=function(){alert("TODO");};k.init=function(){b.logger.debug("Initializing bcms.sales module.");};b.registerInit(k.init);return k;});